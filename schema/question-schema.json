{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "SynSpark Quiz Question Schema",
  "description": "Schema for validating SynSpark quiz question YAML files",
  "type": "object",
  "required": ["type", "id", "title", "level", "question", "answers"],
  "properties": {
    "type": {
      "type": "string",
      "const": "quiz",
      "description": "Must be 'quiz' for all question files"
    },
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Unique identifier using snake_case (lowercase letters, numbers, underscores only)"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Human-readable question title"
    },
    "level": {
      "type": "string",
      "enum": ["beginner", "intermediate", "advanced", "intermediate-advanced"],
      "description": "Difficulty level of the question"
    },
    "starter": {
      "type": "boolean",
      "description": "Optional: marks question as confidence-building starter"
    },
    "followup_to": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Optional: ID of parent question for dependency chain"
    },
    "context": {
      "type": "string",
      "description": "Optional: background information or scenario setup"
    },
    "question": {
      "type": "string",
      "minLength": 10,
      "description": "The actual question text"
    },
    "answers": {
      "type": "array",
      "minItems": 2,
      "maxItems": 6,
      "description": "Array of answer options",
      "items": {
        "type": "object",
        "required": ["text", "correct", "message"],
        "properties": {
          "text": {
            "type": "string",
            "minLength": 1,
            "description": "Answer option text"
          },
          "correct": {
            "type": "boolean",
            "description": "Whether this answer is correct"
          },
          "message": {
            "type": "string",
            "minLength": 1,
            "description": "Explanation shown after selection"
          },
          "points": {
            "type": "integer",
            "minimum": 0,
            "maximum": 10,
            "description": "Points awarded for correct answers (default: 1)"
          }
        },
        "additionalProperties": false
      }
    },
    "allow_retry": {
      "type": "boolean",
      "description": "Whether users can retry the question after wrong answer"
    },
    "random_answer_order": {
      "type": "boolean",
      "description": "Whether to randomize answer order"
    },
    "multiple_correct": {
      "type": "boolean",
      "description": "Whether multiple answers can be correct with different point values"
    },
    "enhancement": {
      "type": "string",
      "description": "Additional enhancement information for the question"
    },
    "details": {
      "type": "string",
      "description": "Detailed explanation or background information"
    },
    "meta": {
      "type": "object",
      "description": "Optional metadata about the question source",
      "properties": {
        "source": {
          "type": "string",
          "description": "Source of the question (forum post, documentation, etc.)"
        },
        "source_date": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "Date of source in YYYY-MM-DD format"
        },
        "source_timestamps": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$"
          },
          "description": "Specific timestamps from source"
        },
        "key_concepts": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Key concepts covered by this question"
        },
        "updated_approach": {
          "type": "boolean",
          "description": "Whether question reflects current best practices"
        },
        "multiple_correct": {
          "type": "boolean",
          "description": "Whether multiple answers can be correct (can also be at top level)"
        },
        "custom": {
          "type": "boolean",
          "description": "Whether this is a custom question"
        },
        "update_approach_details": {
          "type": "string",
          "description": "Details about updates to the approach since the original source"
        },
        "easter_egg": {
          "type": "boolean",
          "description": "Whether this question is an easter egg - a hidden feature or special surprise that rewards engaged users, potentially giving bonus points or special treatment in the UI"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}