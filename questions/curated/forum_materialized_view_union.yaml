type: "quiz"
level: "intermediate"
meta:
  source: "2022-09-14.txt"
  source_date: "2022-09-14"
  source_timestamps: ["2022-09-14 13:25:05", "2022-09-14 13:35:25"]
  key_concepts: ["materialized views", "UNION operations", "table consolidation"]
  updated_approach: true
  multiple_correct: false
context: |
  **Table Consolidation Strategies in Synapse**

  Research projects often generate multiple tables with identical schemas across different cohorts or time periods. Consolidating these tables for unified analysis requires understanding Synapse's current capabilities.
question: "Dr. Parker, a project manager for a multi-cohort study, has access to 7 tables where columns are identical or harmonizable for different cohorts from different sites. Each site has specific access to and is responsible for updating their respective table by adding new study participant records as participants are recruited, which they do once a month but at different times during the month. For sanity-preserving data exploration, Dr. Parker wants to create one unified view to get up-to-date total participants and some basic interactive facets for demographic variables of interest (check number of participants in dynamic age ranges, for example). He asks for a quick consult for an appropriate approach. How should you respond?"
answers:
  - text: "Suggest creating a materialized view with individual JOIN operations between all tables using a common identifier, defining the facets of interest via the usual schema configuration."
    correct: false
    message: "JOIN operations would create a wide table with repeated columns, not the row-wise combination that UNION provides. This doesn't solve the consolidation need."
    points: 0
  - text: "Suggest creating materialized view with the UNION operation, while asking sites to have demographic attributes of interest configured as facets on their source tables, since the MV will inherit the facets."
    correct: true
    message: "Correct! Materialized views support UNIONs and work well for this use case. Note: It used to be that they did not."
    points: 1
  - text: "Suggest that it is best to have a daily automated script to export each table as CSV, combine them manually outside of Synapse, and create a new table to upload back to Synapse"
    correct: false
    message: "While this will work and was once the suggested workaround for when materialized views didn't support UNIONs, there is now a better solution that 1) avoids manual updates when source tables change and 2) provides the desired interactive facets."
    points: 0
  - text: "Suggest using a file view instead of tables to automatically consolidate the data, defining the facets of interest via the usual schema configuration."
    correct: false
    message: "File views are for file metadata, not for consolidating table row data. This wouldn't address the need to combine table contents."
    points: 0
  - text: "Suggest creating a virtual table with the UNION operation and specifying the desired facets in the defininng query."
    correct: false
    message: "Virtual tables don't support UNIONs, though they *can* be useful for aggregating data."
    points: 0
allow_retry: true
random_answer_order: false
