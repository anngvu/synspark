type: "quiz"
level: "intermediate"
meta:
  source: "2022-09-14.txt"
  source_date: "2022-09-14"
  source_timestamps: ["2022-09-14 13:25:05", "2022-09-14 13:35:25"]
  key_concepts: ["materialized views", "UNION operations", "table consolidation", "workarounds"]
  updated_approach: true

context: |
  **Table Consolidation Strategies in Synapse**
  
  Research projects often generate multiple tables with identical schemas across different cohorts or time periods. Consolidating these tables for unified analysis requires understanding Synapse's current capabilities and available workarounds.

question: "Dr. Parker, a project manager for a multi-cohort study, has access to 7 tables with identical columns for these different cohorts. Each site has specific access to/is responsible for updating their respective table by adding new study participant records as participants are recruited, which they do once a month but at different times during the month. For sanity-preserving reporting, Dr. Parker wants to create a unified view to get up-to-date total participants and see demographic facets for the study across all sites. He asks for a quick consult the exact approach. How should you respond?"

answers:
  - text: "Suggest creating a materialized view with individual JOIN operations between all tables using a common identifier"
    correct: false
    message: "JOIN operations would create a wide table with repeated columns, not the row-wise combination that UNION provides. This doesn't solve the consolidation need."
  - text: "Suggesting creating materialized view with the UNION operation."
    correct: false
    message: "This is the right track, but materialized views do not support UNIONs."
  - text: "Suggest that it is best to have a daily automated script to export each table as CSV, combine them manually outside of Synapse, and create a new table to upload back to Synapse"
    correct: false
    message: "While this will work and was once the suggested workaround for when only materialized views existed (and MVs don't support UNIONs), there is now a better solution that is better -- since this requires manual updates when source tables change."
  - text: "Suggest using a file view instead of tables to automatically consolidate the data"
    correct: false
    message: "File views are for file metadata, not for consolidating table row data. This wouldn't address the need to combine table contents."
  - text: "Suggesting creating separate queries for each table to sum participants and demographic features and combine numbers in the client application"
    correct: false
    message: "While possible, this isn't the best -- it puts the consolidation burden on every analysis and doesn't provide a single unified dataset that a user can query directly."
  - text: "Suggest creating a virtual table with the UNION operation."
    correct: false
    message: "Correct! Virtual tables is most likely what the PM wants. Released after materialized views, which don't support UNIONs, virtual tables can create the type of unified view described."

allow_retry: true
random_answer_order: false